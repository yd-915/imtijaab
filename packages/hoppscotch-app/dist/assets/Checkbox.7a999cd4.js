import{f as w,j as y,X as g,V as M,g as S,ap as D,o as E,d as C,e as p,N as O,m as j,aW as K,dB as x,c9 as _,b8 as N,a7 as A,_ as H}from"./index.45473f34.js";import{H as P,E as u,d as V,e as I,t as J,p as L,V as R,h as z,k as F,f as U,g as b}from"./utils.88b63f0a.js";const W={class:"relative flex items-center flex-1 flex-shrink-0 py-4 overflow-auto whitespace-nowrap"},X={class:"absolute inset-0 flex flex-1"},q=["placeholder"],oe=w({__name:"EnvInput",props:{modelValue:{default:""},placeholder:{default:""},styles:{default:""},envs:{default:null},focus:{type:Boolean,default:!1},selectTextOnMount:{type:Boolean},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","change","paste","enter","keyup","keydown","click"],setup(i,{emit:n}){const a=i,s=y(a.modelValue),l=y(),d=y(null);g(()=>a.modelValue,o=>{var c,r;const t=o.replaceAll(`
`,""),e=(c=l.value)==null?void 0:c.state.doc.toJSON().join(l.value.state.lineBreak);(s.value!==t||o!==e)&&(s.value=t,(r=l.value)==null||r.dispatch({filter:!1,changes:{from:0,to:l.value.state.doc.length,insert:t}}))},{immediate:!0,flush:"sync"});let f=null,v=null;const B=M(K,[]),T=S(()=>a.envs?a.envs.map(o=>({key:o.key,value:o.value,sourceEnv:o.source})):B.value),$=new P(T,l),k=o=>{const t=[u.contentAttributes.of({"aria-label":a.placeholder}),u.updateListener.of(e=>{a.readonly&&(e.view.contentDOM.inputMode="none")}),V.changeFilter.of(()=>!a.readonly),I,a.readonly?u.theme({".cm-content":{caretColor:"var(--secondary-dark-color)",color:"var(--secondary-dark-color)",backgroundColor:"var(--divider-color)",opacity:.25}}):u.theme({}),J({position:"absolute"}),$,L(a.placeholder),u.domEventHandlers({paste(e){var c,r;f=e,v=(r=(c=e.clipboardData)==null?void 0:c.getData("text"))!=null?r:""},drop(e){e.preventDefault()}}),R.fromClass(class{update(e){if(!a.readonly&&e.docChanged){const c=x(s.value);s.value=e.state.doc.toJSON().join(e.state.lineBreak);const r=x(s.value).replaceAll(`
`,"");if(n("update:modelValue",r),n("change",r),!!e.transactions.find(h=>h.isUserEvent("input.paste"))&&f){const h=v;_(()=>{n("paste",{pastedValue:h,prevValue:c})})}else f=null,v=null}}}),z(),F.of([...U])];l.value=new u({parent:o,state:V.create({doc:a.modelValue,extensions:t})})},m=()=>{_(()=>{var o,t;(o=l.value)==null||o.focus(),(t=l.value)==null||t.dispatch({selection:b.create([b.range(0,a.modelValue.length)])})})};return D(()=>{d.value&&(l.value||k(d.value),a.selectTextOnMount&&m())}),g(d,()=>{var o;d.value?(l.value||k(d.value),a.selectTextOnMount&&m()):((o=l.value)==null||o.destroy(),l.value=void 0)}),(o,t)=>(E(),C("div",W,[p("div",X,[p("div",{ref_key:"editor",ref:d,placeholder:i.placeholder,class:O(["flex flex-1",i.styles]),onKeydown:[t[0]||(t[0]=j(N(e=>n("enter",e),["prevent"]),["enter"])),t[3]||(t[3]=e=>n("keydown",e))],onKeyup:t[1]||(t[1]=e=>n("keyup",e)),onClick:t[2]||(t[2]=e=>n("click",e))},null,42,q)])]))}}),G=["aria-checked"],Q=["checked"],Y={for:"checkbox",class:"pl-0 font-semibold align-middle cursor-pointer"},Z=w({__name:"Checkbox",props:{on:{type:Boolean,default:!1}},emits:["change"],setup(i,{emit:n}){return(a,s)=>(E(),C("div",{class:"inline-flex items-center justify-center cursor-pointer transition flex-nowrap group hover:text-secondaryDark",role:"checkbox","aria-checked":i.on,onClick:s[1]||(s[1]=l=>n("change"))},[p("input",{id:"checkbox",type:"checkbox",name:"checkbox",checked:i.on,onChange:s[0]||(s[0]=l=>n("change"))},null,40,Q),p("label",Y,[A(a.$slots,"default",{},void 0,!0)])],8,G))}});const le=H(Z,[["__scopeId","data-v-8633d35c"]]);export{le as _,oe as a};
//# sourceMappingURL=Checkbox.7a999cd4.js.map
