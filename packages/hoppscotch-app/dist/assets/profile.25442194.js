var Le=Object.defineProperty;var Ee=(c,o,t)=>o in c?Le(c,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[o]=t;var f=(c,o,t)=>(Ee(c,typeof o!="symbol"?o+"":o,t),t);import{f as le,E as re,j as g,W as Ne,b5 as Ie,g as C,p as F,dK as De,ae as Re,dL as Me,z as ae,o as r,d as p,e as s,t as n,l as e,N as Ae,k as L,a,aB as je,b9 as Te,I as Ve,x as ce,a5 as de,_ as he,dq as V,dM as Ue,dN as ze,aY as P,dO as te,dP as Be,dQ as qe,U as Oe,G,V as k,cz as se,dR as Ye,dS as Pe,c as x,Y as D,dT as Ge,w as $,b8 as oe,v as ie,Z as H,s as R,n as He,q as Fe,b as Qe,be as Ze,a2 as We,dU as Ke,dV as Je,aG as Xe,dW as et,C as tt,dX as st,dY as ot,dZ as it,a8 as nt,a9 as lt,d_ as rt,d$ as at,e0 as ct,e1 as dt,e2 as ht}from"./index.8036b442.js";import{a as ut,_ as _t}from"./Tab.vue_vue_type_script_setup_true_lang.6fe3e1c4.js";import{B as mt,_ as pt}from"./helpers.44f1b5ce.js";import{s as ft}from"./date.bdfa601e.js";import{I as vt}from"./external-link.0ae342ce.js";import{_ as yt}from"./Toggle.979c7818.js";import{d as gt}from"./Shortcode.3a518ed3.js";const bt={class:"block w-full my-6 border divide-y lg:flex lg:my-0 lg:border-0 lg:divide-y-0 lg:divide-x divide-dividerLight border-dividerLight"},St={class:"font-mono text-tiny table-box"},xt={class:"table-box"},$t={class:"justify-center table-box"},wt=le({__name:"Shortcode",props:{shortcode:null},emits:["delete-shortcode"],setup(c,{emit:o}){const t=c,i=re(),m=de(),h=w=>{o("delete-shortcode",w)},M={get:"text-green-500",post:"text-yellow-500",put:"text-blue-500",delete:"text-red-500",default:"text-gray-500"},U=g(),A=Ne(Ie,1e3),d=C(()=>F(t.shortcode.request,JSON.parse,De)),z=C(()=>F(M,Me(d.value.method.toLowerCase()),Re(()=>M.default))),B=C(()=>ft(t.shortcode.createdOn)),b="https://hopp.sh",E=w=>{Te(`${b}/r/${w}`),m.success(`${i("state.copied_to_clipboard")}`),A.value=Ve};return(w,v)=>{const S=ce,N=ae("tippy");return r(),p("div",bt,[s("div",St,n(c.shortcode.id),1),s("div",{class:Ae(["table-box",e(z)])},n(e(d).method),3),s("div",xt,n(e(d).endpoint),1),s("div",{ref_key:"timeStampRef",ref:U,class:"table-box"},n(e(B)),513),s("div",$t,[L(a(S,{title:e(i)("action.open_workspace"),to:`${e(b)}/r/${c.shortcode.id}`,blank:"",icon:e(vt),class:"px-3 text-accent hover:text-accent"},null,8,["title","to","icon"]),[[N,{theme:"tooltip"}]]),L(a(S,{title:e(i)("action.copy"),color:"green",icon:e(A),class:"px-3",onClick:v[0]||(v[0]=I=>E(c.shortcode.id))},null,8,["title","icon"]),[[N,{theme:"tooltip"}]]),L(a(S,{title:e(i)("action.delete"),icon:e(je),color:"red",class:"px-3",onClick:v[1]||(v[1]=I=>h(c.shortcode.id))},null,8,["title","icon"]),[[N,{theme:"tooltip"}]])])])}}});const kt=he(wt,[["__scopeId","data-v-a8c663f6"]]),Ct={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Lt=s("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[s("path",{d:"M12 3c-1.2 0-2.4.6-3 1.7A3.6 3.6 0 0 0 4.6 9c-1 .6-1.7 1.8-1.7 3s.7 2.4 1.7 3c-.3 1.2 0 2.5 1 3.4c.8.8 2.1 1.2 3.3 1c.6 1 1.8 1.6 3 1.6s2.4-.6 3-1.7c1.2.3 2.5 0 3.4-1c.8-.8 1.2-2 1-3.3c1-.6 1.6-1.8 1.6-3s-.6-2.4-1.7-3c.3-1.2 0-2.5-1-3.4a3.7 3.7 0 0 0-3.3-1c-.6-1-1.8-1.6-3-1.6Z"}),s("path",{d:"m9 12l2 2l4-4"})],-1),Et=[Lt];function Nt(c,o){return r(),p("svg",Ct,Et)}const ne={name:"lucide-verified",render:Nt};class It{constructor(o=!1){f(this,"error$");f(this,"loading$");f(this,"shortcodes$");f(this,"hasMoreShortcodes$");f(this,"isDispose");f(this,"myShortcodesCreated");f(this,"myShortcodesRevoked");f(this,"myShortcodesCreatedSub");f(this,"myShortcodesRevokedSub");this.error$=new V(null),this.loading$=new V(!1),this.shortcodes$=new V([]),this.hasMoreShortcodes$=new V(!0),this.isDispose=!0,this.myShortcodesCreated=null,this.myShortcodesRevoked=null,this.myShortcodesCreatedSub=null,this.myShortcodesRevokedSub=null,o||this.initialize()}unsubscribeSubscriptions(){var o,t,i,m;(o=this.myShortcodesCreated)==null||o.unsubscribe(),(t=this.myShortcodesRevoked)==null||t.unsubscribe(),(i=this.myShortcodesCreatedSub)==null||i.unsubscribe(),(m=this.myShortcodesRevokedSub)==null||m.unsubscribe()}initialize(){if(!this.isDispose)throw new Error("Adapter is already initialized");this.fetchList(),this.registerSubscriptions()}isInitialized(){return!this.isDispose}dispose(){if(this.isDispose)throw new Error("Adapter has been disposed");this.isDispose=!0,this.unsubscribeSubscriptions()}fetchList(){this.loadMore(!0)}async loadMore(o=!1){if(!this.hasMoreShortcodes$.value&&!o)return;this.loading$.next(!0);const t=this.shortcodes$.value.length>0?this.shortcodes$.value[this.shortcodes$.value.length-1].id:void 0,i=await Ue({query:ze,variables:{cursor:t}});if(P(i))throw this.error$.next(i.left),console.error(i.left),this.loading$.next(!1),new Error(`Failed fetching short codes list: ${i.left}`);const m=i.right.myShortcodes;this.pushNewShortcodes(m),m.length!==mt&&this.hasMoreShortcodes$.next(!1),this.loading$.next(!1)}pushNewShortcodes(o){const t=this.shortcodes$.value;t.push(...o),this.shortcodes$.next(t)}createShortcode(o){const t=this.shortcodes$.value;t.unshift(o),this.shortcodes$.next(t)}deleteShortcode(o){const t=this.shortcodes$.value.filter(({id:i})=>i!==o);this.shortcodes$.next(t)}registerSubscriptions(){const[o,t]=te({query:Be});this.myShortcodesCreatedSub=t,this.myShortcodesCreated=o.subscribe(h=>{if(P(h))throw console.error(h.left),new Error(`Shortcode Create Error ${h.left}`);this.createShortcode(h.right.myShortcodesCreated)});const[i,m]=te({query:qe});this.myShortcodesRevokedSub=m,this.myShortcodesRevoked=i.subscribe(h=>{if(P(h))throw console.error(h.left),new Error(`Shortcode Delete Error ${h.left}`);this.deleteShortcode(h.right.myShortcodesRevoked.id)})}}const Dt=c=>(nt("data-v-57424e12"),c=c(),lt(),c),Rt={class:"container"},Mt={class:"p-4"},At={key:0,class:"flex flex-col items-center justify-center flex-1 p-4"},jt={key:1,class:"flex flex-col items-center justify-center"},Tt=["src","alt"],Vt={class:"pb-4 text-center text-secondaryLight"},Ut={key:2,class:"space-y-8"},zt=Dt(()=>s("div",{class:"h-24 rounded bg-primaryLight -mb-11 md:h-32",style:{"background-image":"url('/images/cover.svg')"}},null,-1)),Bt={class:"flex flex-col justify-between px-4 space-y-8 md:flex-row"},qt={class:"flex items-end"},Ot={class:"ml-4"},Yt={class:"heading"},Pt={class:"flex items-center text-secondaryLight"},Gt={class:"flex items-end space-x-2"},Ht={class:"grid grid-cols-1"},Ft={class:"p-4"},Qt={class:"font-semibold text-secondaryDark"},Zt={class:"my-1 text-secondaryLight"},Wt={class:"py-4"},Kt={for:"displayName"},Jt=["onSubmit"],Xt=["placeholder"],es={class:"py-4"},ts={for:"emailAddress"},ss=["onSubmit"],os=["placeholder"],is={class:"p-4"},ns={class:"font-semibold text-secondaryDark"},ls={class:"my-1 text-secondaryLight"},rs={class:"py-4 space-y-4"},as={class:"flex items-center"},cs={class:"flex items-center"},ds={class:"flex items-center"},hs={class:"p-4"},us={class:"font-semibold text-secondaryDark"},_s={class:"my-1 text-secondaryLight"},ms={class:"relative py-4 overflow-x-auto"},ps={key:0,class:"flex flex-col items-center justify-center"},fs={class:"text-secondaryLight"},vs={key:1,class:"flex flex-col items-center justify-center p-4 text-secondaryLight"},ys=["src","alt"],gs={class:"mb-4 text-center"},bs={key:2},Ss={class:"hidden w-full border-t rounded-t bg-primaryLight lg:flex border-x border-dividerLight"},xs={class:"flex w-full overflow-y-scroll"},$s={class:"table-box"},ws={class:"table-box"},ks={class:"table-box"},Cs={class:"table-box"},Ls={class:"justify-center table-box"},Es={class:"flex flex-col items-center justify-between w-full overflow-y-scroll border rounded max-h-sm lg:rounded-t-none lg:divide-y border-dividerLight divide-dividerLight"},Ns={key:0,class:"flex flex-col items-center py-3"},Is={key:3,class:"flex flex-col items-center py-4"},Ds=le({__name:"profile",setup(c){var K,J;const o=g("sync"),t=re(),i=de(),m=We();Oe({title:C(()=>t("navigation.profile"))});const h=g(!1),M=G("syncCollections"),U=G("syncEnvironments"),A=G("syncHistory"),d=k(rt,null),z=k(at,null),B=C(()=>z.value?!d.value:!1),b=g((K=d.value)==null?void 0:K.displayName),E=g(!1);se(()=>{var u;return b.value=(u=d.value)==null?void 0:u.displayName});const w=()=>{E.value=!0,ct(b.value).then(()=>{i.success(`${t("profile.updated")}`)}).catch(()=>{i.error(`${t("error.something_went_wrong")}`)}).finally(()=>{E.value=!1})},v=g((J=d.value)==null?void 0:J.email),S=g(!1);se(()=>{var u;return v.value=(u=d.value)==null?void 0:u.email});const N=()=>{S.value=!0,dt(v.value).then(()=>{i.success(`${t("profile.updated")}`)}).catch(()=>{i.error(`${t("error.something_went_wrong")}`)}).finally(()=>{S.value=!1})},I=g(!1),ue=()=>{I.value=!0,Ke().then(()=>{i.success(`${t("profile.email_verification_mail")}`)}).catch(()=>{i.error(`${t("error.something_went_wrong")}`)}).finally(()=>{I.value=!1})},y=new It(!0),Q=k(y.loading$,!1),Z=k(y.error$,null),j=k(y.shortcodes$,[]),_e=k(y.hasMoreShortcodes$,!0),T=C(()=>Q.value&&j.value.length===0);Ye(()=>{y.initialize()}),Pe(u=>{if(u.event==="logout"&&y.isInitialized()){y.dispose();return}});const me=u=>{F(gt(u),ht(l=>{i.error(`${W(l)}`)},()=>{i.success(`${t("shortcodes.deleted")}`)}))()},pe=()=>{y.loadMore()},W=u=>{if(u.type==="network_error")return t("error.network_error");switch(u.error){case"shortcode/not_found":return t("shortcodes.not_found");default:return t("error.something_went_wrong")}};return(u,l)=>{const q=Je,fe=Xe,X=et,ve=ne,O=ce,ye=tt,ge=st,Y=yt,be=kt,Se=pt,ee=ut,xe=ot,$e=_t,we=it,ke=ae("tippy");return r(),p("div",null,[s("div",Rt,[s("div",Mt,[e(B)?(r(),p("div",At,[a(q,{class:"mb-4"})])):e(d)===null?(r(),p("div",jt,[s("img",{src:`/images/states/${e(m).value}/login.svg`,loading:"lazy",class:"inline-flex flex-col object-contain object-center w-24 h-24 my-4",alt:`${e(t)("empty.parameters")}`},null,8,Tt),s("p",Vt,n(e(t)("empty.profile")),1),a(fe,{label:e(t)("auth.login"),class:"mb-4",onClick:l[0]||(l[0]=_=>h.value=!0)},null,8,["label"])])):(r(),p("div",Ut,[zt,s("div",Bt,[s("div",qt,[e(d).photoURL?(r(),x(X,{key:0,url:e(d).photoURL,alt:e(d).displayName||e(t)("profile.default_displayname"),class:"ring-primary ring-4",size:"16",rounded:"lg"},null,8,["url","alt"])):(r(),x(X,{key:1,initial:e(d).displayName||e(d).email,rounded:"lg",size:"16",class:"ring-primary ring-4"},null,8,["initial"])),s("div",Ot,[s("label",Yt,n(e(d).displayName||e(t)("profile.default_hopp_displayname")),1),s("p",Pt,[D(n(e(d).email)+" ",1),e(d).emailVerified?L((r(),x(ve,{key:0,title:e(t)("settings.verified_email"),class:"ml-2 text-green-500 svg-icons cursor-help"},null,8,["title"])),[[ke,{theme:"tooltip"}]]):(r(),x(O,{key:1,label:e(t)("settings.verify_email"),icon:e(ne),class:"px-1 py-0 ml-2",loading:I.value,onClick:ue},null,8,["label","icon","loading"]))])])]),s("div",Gt,[s("div",null,[a(ye,{to:"/settings",icon:e(Ge),label:e(t)("profile.app_settings"),outline:""},null,8,["icon","label"])]),a(ge,{outline:""})])]),a($e,{modelValue:o.value,"onUpdate:modelValue":l[7]||(l[7]=_=>o.value=_),"render-inactive-tabs":""},{default:$(()=>[a(ee,{id:"sync",label:e(t)("settings.account")},{default:$(()=>[s("div",Ht,[s("section",Ft,[s("h4",Qt,n(e(t)("settings.profile")),1),s("div",Zt,n(e(t)("settings.profile_description")),1),s("div",Wt,[s("label",Kt,n(e(t)("settings.profile_name")),1),s("form",{class:"flex mt-2 md:max-w-sm",onSubmit:oe(w,["prevent"])},[L(s("input",{id:"displayName","onUpdate:modelValue":l[1]||(l[1]=_=>b.value=_),class:"input",placeholder:`${e(t)("settings.profile_name")}`,type:"text",autocomplete:"off",required:""},null,8,Xt),[[ie,b.value]]),a(O,{filled:"",outline:"",label:e(t)("action.save"),class:"ml-2 min-w-16",type:"submit",loading:E.value},null,8,["label","loading"])],40,Jt)]),s("div",es,[s("label",ts,n(e(t)("settings.profile_email")),1),s("form",{class:"flex mt-2 md:max-w-sm",onSubmit:oe(N,["prevent"])},[L(s("input",{id:"emailAddress","onUpdate:modelValue":l[2]||(l[2]=_=>v.value=_),class:"input",placeholder:`${e(t)("settings.profile_name")}`,type:"email",autocomplete:"off",required:""},null,8,os),[[ie,v.value]]),a(O,{filled:"",outline:"",label:e(t)("action.save"),class:"ml-2 min-w-16",type:"submit",loading:S.value},null,8,["label","loading"])],40,ss)])]),s("section",is,[s("h4",ns,n(e(t)("settings.sync")),1),s("div",ls,n(e(t)("settings.sync_description")),1),s("div",rs,[s("div",as,[a(Y,{on:e(M),onChange:l[3]||(l[3]=_=>e(H)("syncCollections"))},{default:$(()=>[D(n(e(t)("settings.sync_collections")),1)]),_:1},8,["on"])]),s("div",cs,[a(Y,{on:e(U),onChange:l[4]||(l[4]=_=>e(H)("syncEnvironments"))},{default:$(()=>[D(n(e(t)("settings.sync_environments")),1)]),_:1},8,["on"])]),s("div",ds,[a(Y,{on:e(A),onChange:l[5]||(l[5]=_=>e(H)("syncHistory"))},{default:$(()=>[D(n(e(t)("settings.sync_history")),1)]),_:1},8,["on"])])])]),s("section",hs,[s("h4",us,n(e(t)("settings.short_codes")),1),s("div",_s,n(e(t)("settings.short_codes_description")),1),s("div",ms,[e(T)?(r(),p("div",ps,[a(q,{class:"mb-4"}),s("span",fs,n(e(t)("state.loading")),1)])):R("",!0),!e(T)&&e(j).length===0?(r(),p("div",vs,[s("img",{src:`/images/states/${e(m).value}/add_files.svg`,loading:"lazy",class:"inline-flex flex-col object-contain object-center w-16 h-16 mb-8",alt:`${e(t)("empty.shortcodes")}`},null,8,ys),s("span",gs,n(e(t)("empty.shortcodes")),1)])):e(T)?R("",!0):(r(),p("div",bs,[s("div",Ss,[s("div",xs,[s("div",$s,n(e(t)("shortcodes.short_code")),1),s("div",ws,n(e(t)("shortcodes.method")),1),s("div",ks,n(e(t)("shortcodes.url")),1),s("div",Cs,n(e(t)("shortcodes.created_on")),1),s("div",Ls,n(e(t)("shortcodes.actions")),1)])]),s("div",Es,[(r(!0),p(He,null,Fe(e(j),(_,Ce)=>(r(),x(be,{key:`shortcode-${Ce}`,shortcode:_,onDeleteShortcode:me},null,8,["shortcode"]))),128)),e(_e)&&e(j).length>0?(r(),x(Se,{key:0,onIntersecting:l[6]||(l[6]=_=>pe())},{default:$(()=>[e(Q)?(r(),p("div",Ns,[a(q)])):R("",!0)]),_:1})):R("",!0)])])),!e(T)&&e(Z)?(r(),p("div",Is,[(r(),x(Qe(e(Ze)),{class:"mb-4 svg-icons"})),D(" "+n(W(e(Z))),1)])):R("",!0)])])])]),_:1},8,["label"]),a(ee,{id:"teams",label:e(t)("team.title")},{default:$(()=>[a(xe,{modal:!1,class:"p-4"})]),_:1},8,["label"])]),_:1},8,["modelValue"])]))]),a(we,{show:h.value,onHideModal:l[8]||(l[8]=_=>h.value=!1)},null,8,["show"])])])}}});const Bs=he(Ds,[["__scopeId","data-v-57424e12"]]);export{Bs as default};
//# sourceMappingURL=profile.25442194.js.map
